---
import type { Album } from '../../../scripts/types';
import { Album as AlbumIcon, Disc3, Music, PenTool, Mic, Archive, GitBranch, Package } from '@lucide/astro';

interface Props {
  album: Album;
}

const { album } = Astro.props;

const typeColors: Record<string, string> = {
  album: 'bg-accent/20 text-accent-light',
  ep: 'bg-emerald-500/20 text-emerald-400',
  single: 'bg-amber-500/20 text-amber-400',
  demo: 'bg-orange-500/20 text-orange-400',
  live: 'bg-rose-500/20 text-rose-400',
  compilation: 'bg-cyan-500/20 text-cyan-400',
  split: 'bg-violet-500/20 text-violet-400',
  other: 'bg-gray-500/20 text-gray-400',
};

const badgeClass = typeColors[album.type] ?? typeColors.other;

const typeIcons: Record<string, any> = {
  album: AlbumIcon,
  ep: Disc3,
  single: Music,
  demo: PenTool,
  live: Mic,
  compilation: Archive,
  split: GitBranch,
  other: Package,
};

const TypeIcon = typeIcons[album.type] ?? typeIcons.other;
---

<div class="rounded-lg border border-surface-200 bg-surface-50 p-4">
  <div class="flex items-start justify-between gap-3">
    <div class="min-w-0">
      <div class="flex items-start gap-2">
        <TypeIcon class="h-5 w-5 text-accent shrink-0 mt-0.5" />
        <h3 class="font-medium text-gray-100">{album.name}</h3>
      </div>
      <div class="mt-1 flex flex-wrap items-center gap-2 text-sm text-gray-400">
        {album.year && <span>{album.year}</span>}
        {album.type !== 'album' && (
          <span class={`rounded px-1.5 py-0.5 text-xs font-medium ${badgeClass}`}>
            {album.type.toUpperCase()}
          </span>
        )}
        {album.reissue && (
          <span class="rounded px-1.5 py-0.5 text-xs font-medium bg-yellow-500/20 text-yellow-400">
            {album.reissue}
          </span>
        )}
        {album.hasMultipleDiscs && (
          <span class="text-xs text-gray-500">{album.discCount} discs</span>
        )}
      </div>
    </div>
  </div>
</div>
